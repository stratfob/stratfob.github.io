<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Password Generator</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/shop-item.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
    <!-- Page Content -->
    <div class="container center_div">

        <div class="page-header">
			<h1 class="text-center">Password Generator</h1>
		</div>
		<div class="row">
			<div class="col-md-4"></div>
			<div class="col-md-4">
				<input type="password" id="input" class="form-control" placeholder="Password" oninput="createHashes()">
			</div>
			<br><br><br><br>
        </div>
	</div>
	<div class="container">
		<div class="row">
            <div class="col-md-6">
				<div class="panel panel-primary">
					<div class="panel-heading"><h3 class="panel-title">Google</h3></div>
					<div class="panel-body" id="Google"><br></div>
				</div>
				<div class="panel panel-primary">
					<div class="panel-heading"><h3 class="panel-title">Facebook</h3></div>
					<div class="panel-body" id="Facebook"><br></div>
				</div>
				<div class="panel panel-primary">
					<div class="panel-heading"><h3 class="panel-title">Microsoft</h3></div>
					<div class="panel-body" id="Microsoft"><br></div>
				</div>
				<div class="panel panel-primary">
					<div class="panel-heading"><h3 class="panel-title">Reddit</h3></div>
					<div class="panel-body" id="Reddit"><br></div>
				</div>
			</div>
			<div class="col-md-6">
				<div class="panel panel-primary">
					<div class="panel-heading"><h3 class="panel-title">Paypal</h3></div>
					<div class="panel-body" id="Paypal"><br></div>
				</div>
				<div class="panel panel-primary">
					<div class="panel-heading"><h3 class="panel-title">Amazon</h3></div>
					<div class="panel-body" id="Amazon"><br></div>
				</div>
				<div class="panel panel-primary">
					<div class="panel-heading"><h3 class="panel-title">Twitter</h3></div>
					<div class="panel-body" id="Twitter"><br></div>
				</div>
				<div class="panel panel-primary">
					<div class="panel-heading"><h3 class="panel-title">Other</h3></div>
					<div class="panel-body" id="Other"><br></div>
				</div>
            </div>

        </div>

    </div>
    <!-- /.container -->

    <div class="container">

        <hr>

        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
                    <p>This project is maintained by <a href="https://github.com/stratfob/">Ben Stratford</a></p>
                </div>
            </div>
        </footer>

    </div>
    <!-- /.container -->

	<script>
		function createHashes() {
			var input = document.getElementById('input').value;
			document.getElementById("Google").innerHTML=hash(input,"Google");
			document.getElementById("Facebook").innerHTML=hash(input,"Facebook");
			document.getElementById("Microsoft").innerHTML=hash(input,"Microsoft");
			document.getElementById("Reddit").innerHTML=hash(input,"Reddit");
			document.getElementById("Paypal").innerHTML=hash(input,"Paypal");
			document.getElementById("Amazon").innerHTML=hash(input,"Amazon");
			document.getElementById("Twitter").innerHTML=hash(input,"Twitter");
			document.getElementById("Other").innerHTML=hash(input,"Other");
		}
		
		function intToBinaryString(number){
			var binarised = (number >>> 0).toString(2);
			for(var i = binarised.length; i<32; i++){
				binarised = '0' + binarised;
			}
			return binarised;
		}
		
		function chunkHash(input){
			var hash = 0x811c9dc5;
			for (var i = 0; i < input.length; i++) {
				hash ^= input.charCodeAt(i);
				hash *= 0x01000193;
			}
			return hash;
		}
		
		function hash(input,website){
			if(input==="") return "<br>";
			var initial = input+website;
			var partOne = intToBinaryString(chunkHash(initial));
			var partTwo = intToBinaryString(chunkHash(parseInt(partOne.split('').reverse().join(''),2)));
			var partThree = partOne.split('').reverse().join('');
			var partFour = intToBinaryString(parseInt(partTwo, 2)^parseInt(partOne, 2));
			
			var binary = partOne+partTwo+partThree+partFour;
			var output = "";
			for (var i = 0; i < binary.length; i += 8){
				var num = (parseInt(binary.substr(i, 8), 2)%90) + 33;
				if(num>=58&&num<=63){
					num+=6;
				}
				output += String.fromCharCode(num);
			}
			return output;
		}
	</script>

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

</body>

</html>
